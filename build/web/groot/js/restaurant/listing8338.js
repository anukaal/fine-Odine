function reposition(){var e=$("#restaurants").outerWidth(),t=$("#restaurants .restaurant").outerWidth(!0),i=Math.floor(e/t),s=[];$("#restaurants .restaurant").each(function(){for(var e=0,r=0;r<i;r++){if(void 0==s[r]){s[r]=0,e=r;break}s[e]>s[r]&&(e=r)}var a=$(this).children("div").outerHeight(!0)+20;$(this).css({position:"absolute",left:t*e,top:s[e]}),s[e]=s[e]+a}),changeContainerHeight(s,i)}function changeContainerHeight(e,t){for(var i=e[0],s=1;s<t;s++)i<e[s]&&(i=e[s]);$("#restaurants").height(i)}function setFilters(){$("#selected-filters").html(""),$("#form-filters input[type=checkbox]").each(function(){if(this.checked){var e=$(this).data("name"),t=$(this).val(),i=$(this).attr("name"),s=$("#templates>.selected-filter").clone();s.find(".name").text(e),s.attr("data-id",t),s.attr("data-type",i),fireFilterEvent(i,e),$("#selected-filters").append(s)}})}function fireFilterEvent(e,t){switch(e.replace("[]","")){case"cuisines":clevertap.event.push("Filter Applied",{Cuisines:t,Medium:"Desktop Website"});break;case"buckets":clevertap.event.push("Filter Applied",{Buckets:t,Medium:"Desktop Website"});break;case"categories":clevertap.event.push("Filter Applied",{Categories:t,Medium:"Desktop Website"});break;case"deal_types":clevertap.event.push("Filter Applied",{"Deal Type":t,Medium:"Desktop Website"})}}$(".filter-button").on("click",function(){$("#filter-box").fadeIn()}),$(".filter-close-button").on("click",function(){$("#filter-box").fadeOut()}),$("#filter-groups>li").on("click",function(){$("#filters>.filter").removeClass("active");var e=$(this).data("filter");$(e).addClass("active"),$("#filter-groups>li").removeClass("active"),$(this).addClass("active")}),$("#form-filters select[name=sort]").on("change",function(){$("#form-filters").submit()}),$("#form-filters input[name=view_type]").on("change",function(){$("#form-filters").submit()}),$("#form-filters").on("submit",function(){if($("#form-filters").addClass("hidden"),$(".loader-filters").removeClass("hidden"),isListing){setFilters();var e=$("#form-filters").serialize();return history.pushState(null,null,"?"+e),url="?"+e,$.ajax(url,{type:"GET",success:function(e){$("#container-restaurants").html(e),$("#form-filters").removeClass("hidden"),$(".loader-filters").addClass("hidden")},error:function(){$("#form-filters").removeClass("hidden"),$(".loader-filters").addClass("hidden")},cache:!1}),!1}}),setFilters(),$("#selected-filters").on("click",".remove",function(){var e=$(this).closest(".selected-filter"),t=e.data("type"),i=e.data("id");$('#form-filters input[name="'+t+'"]').each(function(){$(this).val()==i&&$(this).prop("checked",!1)}),e.remove(),$("#form-filters").submit()});